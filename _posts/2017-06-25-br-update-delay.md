---
layout: default
title: Why'd replays take so long?
---

We launched Blue Revolver on the 11th of October, 2016. At the time, I had promised full Steam leaderboards, replay support and achievements. Now, about 8 and a half months later, the update is now live and everything seems to be working fine.

I'm not trying to write excuses here, the delay for players is inexcusable and the fault lies entirely with myself. But I'm writing this down to explain what happened and to share with other developers who might fall down the same hole.

### Technicalities

The technical side was a little involved, but didn't require any massive rethinking of the game, I was suprised to find.

* Replay files are a simple, fairly standard affair. Record the input state of the game on each frame as well as a number generated by the RNG. The number is to detect desync within the RNG.
* I wrote a sound manager for the game that would pool and limit audio channels ("sources") for sound effects, in the hope of making certain things sound more authentic. I wrote this very early on in the project and forgot about it. However, it would call math.random a lot, creating non-determinism in cases where lots of sounds are played.
* The timer library we use for delays/tweens/etc, HUMP.Timer, is non-deterministic if two functions are scheduled with the same delay. 
* Game made plenty of sloppy calls to love.timer.getTime() for sin effects etc, which is obviously non-deterministic.
* Integrating with Steam's leaderboards/cloud API was done using FFI and was a complete ballache. The documentation for this stuff could really be a lot better, but it's B2B stuff, I suppose.

Of course, given the nature of replays, testing takes a pretty huge chunk of time, and it requires a thorough, investigatory mindset. 

### Impostor Syndrome

I am not the best player. Sure, I've collected a healthy amount of 1CCs over the years, but I'm far from a superplayer. Compare with the developer of Crimzon Clover, aka Clover-TAC, who... actually is.

And there are a lot of things I'm not happy with in the game.

I became convinced that in terms of the game/level/pattern design, I had completely pulled a fast one on STG fans and just barely got away with it. And if I was to call attention and competition to the game with leaderboards and replays, inviting people to play at the highest level, the game would completely break down and I'd be shown up as a hack, a failure, a fraud.

So I fell into a pretty grim place for a long while, sat on my hands, slept days away. And of course, the longer things went without any news or communication about leaderboards/replays, the more my weird concerns about being shown up as a fraud ended up turning me into an actual fraud.

I was really nervous about shipping this update, to the point of being physically sick, very afraid that the response would be "too little, too late". However, what I've seen has been very encouraging, and the Steam summer sale is doing alright for us so far. 

I'm currently speccing out what we can do with Blue Revolver in the future. Any core game stuff would have to come as part of a wholly comprehensive rebalance/rework package - a "black label", and not too soon, either. Nobody wants to play a STG that's constantly changing under them. But there's extra modes, features, etc to consider too, in the interim.

Thanks for reading. Obligatory small teaser of something I've got sitting in my "experimental" branch:

![Sidebar gadgets]({{ site.url }}/assets/br_gadgets.png)